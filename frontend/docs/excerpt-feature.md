# 首页卡片句摘功能说明

## 功能概述
在首页的每个页面卡片上显示一个从页面内容中随机提取的句摘，让用户在点击进入详情页之前就能预览页面内容。

## 实现细节

### 后端（BFF）处理
1. **数据获取**：在查询页面数据时包含`textContent`字段
2. **句摘提取**：
   - 清理文本：移除Wikidot语法标记（`[[]]`、`{{}}}`等）
   - 移除列表标记和多余的空白字符
   - 尝试提取完整的句子（以句号、问号、感叹号分隔）
   - 随机选择一个长度合适的句子
   - 如果没有合适的句子，则截取文本的前150个字符
3. **数据传输优化**：返回`excerpt`字段，不返回完整的`textContent`以减少传输量

### 前端显示
1. **位置**：句摘显示在标签和统计数据之间
2. **样式**：
   - 斜体文字，用引号包围
   - 左侧带有绿色边框装饰
   - 最多显示3行（使用`line-clamp-3`）
   - 文字颜色适配深色/浅色主题
3. **字数限制**：默认最大150个字符，超出部分用省略号表示

## 用户体验优化
- **随机性**：每次刷新页面会显示不同的句摘，增加新鲜感
- **可读性**：优先选择完整的句子，避免断句
- **视觉层次**：通过斜体和引号，明确表示这是引用内容
- **响应式**：句摘会根据卡片宽度自适应换行

## 技术栈
- **后端**：Node.js + Express + PostgreSQL
- **前端**：Vue 3 + Nuxt 3 + Tailwind CSS
- **数据处理**：正则表达式清理文本，随机算法选择句子
